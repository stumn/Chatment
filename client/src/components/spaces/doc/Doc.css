/* Doc.css */

#docList {
    overflow-x: hidden;
    padding-top: 8px;
}

.doc-comment-item {
    display: flex;
    align-items: center;
    padding-top: 4px;
    padding-bottom: 4px;
    padding-left: 20px;
    /* ChangeBarのスペースを確保 */
    padding-right: 16px;
    box-sizing: border-box;
    background-color: white;
    border: 1px solid transparent;
    transition: all 0.2s ease;
    align-items: stretch;
    position: relative;
    /* エラーメッセージ位置調整のため */
}

/* ホバー時の視覚的フィードバック */
.doc-comment-item:hover {
    background-color: #f3f4f6;
    /* hover:bg-gray-100相当 */
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    /* hover:shadow-md相当 */
    border-color: #e5e7eb;
    /* ボーダーも少し強調 */
}

/* ★改善: ドラッグ中のアイテムが元あった場所のスタイル */
.is-drag-placeholder {
    background-color: #e6f7ff;
    /* 薄い水色 */
    border-color: #91d5ff;
    /* 水色のボーダー */
}

.is-drag-placeholder * {
    color: red !important;
    /* 中の文字を透明にする */
    cursor: grabbing;
}



/* ロック中のアイテム全体のスタイル */
.locked {
    background-color: #fff3cd !important;
    border-color: #ffeaa7 !important;
    pointer-events: none;
    /* ドラッグを完全に無効化 */
}

.locked .doc-comment-content {
    pointer-events: auto;
    /* テキスト選択は有効にする */
}

.is-dragging {
    background-color: #f0f8ff;
    border: 1.5px solid #8ec3f1;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    transform: scale(1.05);
    z-index: 10;
}

/* 既存のスタイル ... */
.doc-comment-content {
    flex: none;
    /* flex: 1 を削除してコンテンツ幅に合わせる */
    width: fit-content;
    /* テキストコンテンツの幅に合わせる */
    max-width: calc(100% - 150px);
    /* ボタンエリアを考慮した最大幅 */
    outline: none;
    word-break: break-word;
    cursor: default;
    text-align: left;
    padding-left: 8px;
    padding-right: 8px;
    font-size: 15px;
    border: none;
    background: transparent;
    min-height: 28px;
    height: auto;
    /* 高さは内容に合わせて伸びる */
    white-space: pre-wrap;
    transition: background 0.2s;
    position: relative;
}

.doc-comment-content:focus {
    outline: 2px solid #8ec3f1;
    background: #f5fbff;
}



/* ホバー時に表示される追加ボタン（右側に表示） */
.add-button {
    position: absolute;
    right: 8px;
    top: 50%;
    transform: translateY(-50%);
    opacity: 0;
    transition: opacity 0.2s, transform 0.2s;
    z-index: 10;
    pointer-events: auto;
}

/* コンパクトモードではない場合は常時表示 */
.doc-comment-item:not(.compact-mode) .add-button {
    opacity: 1;
}

/* コンパクトモードの場合はホバー時のみ表示 */
.doc-comment-item.compact-mode:hover .add-button,
.doc-comment-item:hover .add-button,
.doc-comment-content:focus+.add-button {
    opacity: 1;
    transform: translateY(-50%) scale(1.1);
}

.edit-button {
    position: absolute;
    right: 44px;
    top: 50%;
    transform: translateY(-50%);
    opacity: 0;
    transition: opacity 0.2s, transform 0.2s;
    z-index: 10;
    pointer-events: auto;
}

/* コンパクトモードではない場合は常時表示 */
.doc-comment-item:not(.compact-mode) .edit-button {
    opacity: 1;
}

/* コンパクトモードの場合はホバー時のみ表示 */
.doc-comment-item.compact-mode:hover .edit-button,
.doc-comment-item:hover .edit-button {
    opacity: 1;
    transform: translateY(-50%) scale(1.1);
}

.delete-button {
    position: absolute;
    right: 80px;
    top: 50%;
    transform: translateY(-50%);
    opacity: 0;
    transition: opacity 0.2s, transform 0.2s;
    z-index: 10;
    pointer-events: auto;
}

/* コンパクトモードではない場合は常時表示 */
.doc-comment-item:not(.compact-mode) .delete-button {
    opacity: 1;
}

/* コンパクトモードの場合はホバー時のみ表示 */
.doc-comment-item.compact-mode:hover .delete-button,
.doc-comment-item:hover .delete-button {
    opacity: 1;
    transform: translateY(-50%) scale(1.1);
}

/* ロック状態の視覚的表現 */

.doc-comment-item.locked {
    background-color: #fff3cd !important;
    border-left: 4px solid #ffc107 !important;
    opacity: 0.8;
    position: relative;
}

.doc-comment-item.locked .doc-comment-content {
    pointer-events: none !important;
    user-select: none !important;
    cursor: not-allowed !important;
    background-color: rgba(255, 243, 205, 0.5) !important;
}

.doc-comment-item.locked .edit-button,
.doc-comment-item.locked .delete-button,
.doc-comment-item.locked .add-button {
    display: none !important;
}



/* ドラッグ中の状態 */
.doc-comment-item.drag-disabled {
    pointer-events: none;
    user-select: none;
}

/* 変更バー（サイドバー）のスタイル */
.change-bar {
    width: 12px;
    height: 100%;
    min-height: 20px;
    margin-left: 4px;
    /* 左側に寄せる */
    margin-right: 4px;
    border-radius: 2px;
    transition: all 0.2s ease;
    cursor: pointer;
    /* ホバー可能であることを示す */
    opacity: 1;
}

/* ChangeBarを常に左端に固定（インデントの影響を受けない） */
.change-bar-fixed {
    position: absolute;
    left: 4px;
    top: 0;
    bottom: 0;
    margin: 0;
}

.change-bar.fade-out {
    opacity: 0;
    transition: opacity 2s ease-out;
    /* 2秒かけてフェードアウト */
}

.change-bar:hover {
    width: 12px;
    /* ホバー時に少し太く */
    box-shadow: 0 0 4px rgba(0, 0, 0, 0.3);
    /* ホバー時に影を追加 */
    opacity: 1 !important;
    /* ホバー中はフェードアウトを一時停止 */
}

.bar-added {
    background-color: #2196F3;
    /* 青 - 空行追加 */
}

.bar-deleted {
    background-color: #F44336;
    /* 赤 - 削除 */
}

.bar-modified {
    background-color: #4CAF50;
    /* 緑 - 編集 */
}

.bar-reordered {
    background-color: #FF9800;
    /* オレンジ - 並び替え */
}

.bar-none {
    background-color: transparent;
    /* 変更なし */
}

/* インデントレベルに応じたスタイル */
.doc-comment-item.indent-level-0 {
    padding-left: 20px !important;
    /* ChangeBarのスペース */
}

.doc-comment-item.indent-level-1 {
    padding-left: 44px !important;
    /* ChangeBarのスペース + インデント1段階 */
}

.doc-comment-item.indent-level-2 {
    padding-left: 68px !important;
    /* ChangeBarのスペース + インデント2段階 */
}

/* インデントボタンのスタイル */
.indent-buttons {
    display: flex;
    gap: 4px;
    margin-right: 8px;
    margin-left: 4px;
    /* ChangeBarとの間隔を確保 */
    align-items: center;
}

.indent-button {
    width: 20px;
    height: 20px;
    border: 1px solid #d0d0d0;
    background-color: white;
    color: #666;
    font-size: 14px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 3px;
    transition: all 0.2s;
    padding: 0;
    line-height: 1;
}

.indent-button:hover {
    background-color: #f0f0f0;
    border-color: #8ec3f1;
    color: #333;
    transform: scale(1.1);
}

.indent-button:active {
    transform: scale(0.95);
    background-color: #e0e0e0;
}