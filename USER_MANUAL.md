# Chatment ユーザーマニュアル

## 概要
Chatmentは、リアルタイムチャットとドキュメント共同編集を組み合わせたコミュニケーションツールです。

---

## 基本的な使い方

### 1. スペースへのアクセス

#### スペースとは
- 議論やコミュニケーションを行う場所の単位
- URL: `/spaces/{スペースID}`

#### 初回ログイン
1. スペースURLにアクセス
2. ログインダイアログが表示される
3. 以下の情報を入力：
   - **ニックネーム**: 自分の表示名
   - **属性**: 所属や役割（例: 学生、社会人など）
   - **年代**: 10代、20代、30代、40代、50代、60代以上から選択
4. 「ログイン」ボタンをクリック

> 💡 入力した情報は自動保存され、次回アクセス時に自動入力されます。

---

### 2. 画面構成

ログイン後の画面は以下の要素で構成されています：

#### サイドバー（左側）
- **開閉トグル**: ×ボタンでサイドバーを閉じる
- **表示モード切り替え**: 
  - **カラー表示**: 評価に応じて色分け表示（緑=高評価、赤=低評価）
  - **コンパクト表示**: ボタン類をホバー時のみ表示して画面をすっきり
- **ルーム一覧**: 参加中のルーム切り替え
- **チャプター選択**: 見出しと注目コメントへのジャンプ
- **全編の振り返り**: 全投稿を別タブで表示

#### メインエリア（中央）
- **チャットパネル（左）**: リアルタイムメッセージ表示
- **ドキュメントパネル（右）**: 共同編集可能な文書
- パネル間の境界はドラッグで幅調整可能

#### Telomere（右端の緑バー）
- 各参加者のスクロール位置を視覚的に表示
- 緑色の小さなバーが各参加者の現在位置を示す
- 複数のバーが重なると色が濃くなる

#### 入力フォーム（下部）
- ハンドルネーム選択とメッセージ入力欄

---

### 3. チャット機能

#### メッセージ送信
1. 画面下部の入力欄にテキストを入力
2. 「送信」ボタンをクリック、または `Ctrl+Enter` で送信

#### ハンドルネーム切り替え
- 入力欄左側のドロップダウンで2つのハンドルネームを切り替え可能：
  - 登録したニックネーム（例: 太郎）
  - **年代+属性** の組み合わせ（例: 20代学部生、30代社会人）

#### チャットメッセージの表示
- 各メッセージは **ニックネーム** と **タイムスタンプ** とともに表示
- メッセージはリアルタイムで全参加者に配信
- **見出し機能**: `#`で始まるメッセージは見出しとして大きく表示

#### 評価機能（⬆⬇ボタン）
各メッセージには評価ボタンが表示されます：
- **⬆（緑の上矢印）**: ポジティブ評価（賛成、重要など）
- **⬇（赤の下矢印）**: ネガティブ評価（反対、優先度低など）
- 各ユーザーは1回のみ評価可能（投票後はグレーアウト）
- 評価の差（⬆-⬇）に応じてメッセージサイズが変化
- 画面右側のパネルに表示

#### チャットとドキュメントの違い
|  | チャット（左） | ドキュメント（右） |
|---|---|---|
| 用途 | リアルタイムな会話 | 議論の整理・まとめ |
| 編集 | 送信後は編集不可 | いつでも編集・並び替え可能 |
| 表示 | 時系列で流れる | 構造化して配置 |
| 見出し | `#`で始めると大きく表示 | `#`で始めると大きく表示 |

#### コメントの操作ボタン
各コメントには右側に3つのボタンが表示されます：
- **🖊️（鉛筆アイコン）**: 編集モードに切り替え
- **🗑️（ゴミ箱アイコン）**: 空白行を削除（空白行のみ表示）
- **➕（プラスアイコン）**: このコメントの下に新しい行を追加

> 💡 **コンパクト表示ON時**: ボタンはホバー時のみ表示

#### コメントの追加
**方法1: 下に追加**
1. 追加したい位置の上のコメントにマウスを合わせる
2. **➕（プラス）ボタン**をクリック
3. 新しい空白行が挿入される

#### コメントの編集
1. 編集したいコメントの **🖊️（鉛筆）ボタン**をクリック
2. テキストを直接編集
3. **✓（チェック）ボタン**をクリック、または `Ctrl+Enter` で確定
4. 変更は全参加者にリアルタイムで反映

#### コメントの並び替え
- コメントをドラッグ&ドロップで自由に並び替え可能
- 並び順は全参加者にリアルタイムで同期

#### コメントの削除
- 空白行の場合、**🗑️（ゴミ箱）ボタン**で削除可能
- テキストが表示モードの切り替え

サイドバー上部で2つの表示モードを切り替えできます：

#### カラー表示モード
- **OFF（デフォルト）**: すべてのメッセージが同じスタイルで表示
- **ON**: 評価に応じた色分け表示
  - チャット: 高評価は緑色、低評価は赤色のテキスト
  - ドキュメント: 高評価は緑背景、低評価は赤背景
  - 評価差によってフォントサイズも変化

#### コンパクト表示モード
- **OFF（デフォルト）**: 編集・評価ボタンが常時表示
- **ON**: 各種ボタンがホバー時のみ表示
  - 画面がすっきりして読みやすくなる
  - 必要なときだけボタンが表示される

---

### 6. ルーム機能

#### ルームとは
- スペース内でさらに細分化された議論の場
- 複数のルームを同時に利用可能（例: テーマ別、グループ別）

#### ルーム切り替え
1. サイドバーのルーム一覧から選択
2. 自動的にそのルームのチャット・ドキュメントに切り替わる
3. 各ルームは独立したチャットとドキュメントを持つが変化
  - **緑色の背景**: ポジティブ評価が多い（重要・賛成が多い）
  - **赤色の背景**: ネガティブ評価が多い（優先度低・反対が多い）
  - 背景なし: 評価が拮抗している
3. フォーカスを外すと自動保存

#### コメントの並び替え
- コメントをドラッグ&ドロップで並び替え可能
- 変更は全参加者にリアルタイムで反映

#### コメントの削除
- 各コ7. チャプター選択機能

サイドバーで見出しと注目コメントに素早くアクセスできます：

#### 全編の振り返り
- サイドバー内のボタンをクリック
- **新しいタブ**で全投稿一覧が開く（後述のドキュメントページ）
- 議論全体を俯瞰したいときに便利

#### 見出し・注目コメントリスト
- `#`で始まるメッセージが見出しとして表示される
- 見出しの下に、高評価のコメントが「注目コメント」として表示
- クリックするとそのコメント位置にスクロール
- 長い議論でも重要な箇所にすぐアクセス可能

> 💡 見出しや注目コメントがない場合は「見出しや注目コメントがありません」と表示

---

### 8. ドキュメントページ（全編の振り返り）

#### アクセス方法、ドキュメント編集確定

### 効果的な使い方
- **見出しを活用**: チャットで `#`を使って議論の区切りを明示
- **評価で優先度を整理**: 重要な意見には⬆、優先度の低い内容には⬇を押す
- **カラー表示で可視化**: 重要な議論が一目でわかる
- **コンパクト表示で集中**: 読むことに集中したいときはコンパクト表示をON

### ブラウザの互換性
- 最新のChrome、Firefox、Edge、Safariを推奨

### データの保存
- チャットメッセージとドキュメントは自動保存
- ブラウザを閉じても履歴は保持
- 編集内容はリアルタイムで全参加者に同期

### Telomereの見方
- 画面右端の緑色の縦バーが **Telomere**
- 各参加者のスクロール位置を緑色の小さなバー（高さ5px）で表示
- **バーの位置**: 画面上部からの相対的なスクロール位置
- ページを更新してみる

### ドキュメントが編集できない
- 他のユーザーが編集中（**黄色表示**）の場合は編集完了を待つ
- 編集ボタンをクリックしても反応がない場合はページを更新

### ボタンが表示されない
- **コンパクト表示がON**になっている可能性があります
- サイドバーを開いて「コンパクト表示」をOFFにする
- またはメッセージにマウスを合わせるとボタンが表示されます

### 評価ボタンが押せない
- 既に投票済みの場合は再度押せません（グレー表示）
- 見出し行（`#`で始まる行）には評価ボタンがありません

### ページが表示されない
- URLが正しいか確認（スペースIDが含まれているか）
- ブラウザのキャッシュをクリア
- JavaScriptが有効になっているか確認
1. サイドバーのルーム一覧から選択
2. 自動的にそのルームのチャット・ドキュメントに切り替わる

---

### 6. ドキュメントページ

#### アクセス方法
- サイドバーのドキュメント一覧から「詳細」ボタンをクリック
- URL: `/document/{スペースID}/{ドキュメントID}`

#### 機能
- **ドキュメントID = 0**: スペース内の全投稿を一覧表示
- **ドキュメントID > 0**: 特定の見出しレベル別に表示（将来実装予定）
- 印刷形式での閲覧・出力に最適化

#### 操作
- **更新ボタン**: 最新のデータを再取得
- **閉じるボタン**: ドキュメントページを閉じる
- スクロールで全投稿を閲覧可能

---

## Tips

### キーボードショートカット
- **Ctrl+Enter**: メッセージ送信

### ブラウザの互換性
- 最新のChrome、Firefox、Edge、Safariを推奨

### データの保存
- チャットメッセージとドキュメントは自動保存
- ブラウザを閉じても履歴は保持

### 接続状況の確認
- Telomere（右端の縦バー）で参加者の接続状況を確認
- 各参加者の高さが異なる場合、スクロール位置が異なることを示す

---

## トラブルシューティング

### メッセージが送信できない
- ルームに参加しているか確認
- インターネット接続を確認

### ドキュメントが編集できない
- 他のユーザーが編集中（黄色表示）の場合は待つ
- ページを更新してみる

### ページが表示されない
- URLが正しいか確認
- ブラウザのキャッシュをクリア

---

## お問い合わせ
問題が解決しない場合は、管理者にお問い合わせください。
